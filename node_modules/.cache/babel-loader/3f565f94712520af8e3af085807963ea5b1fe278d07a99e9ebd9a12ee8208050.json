{"ast":null,"code":"import Vue from \"vue\";\nimport VueRouter from 'vue-router';\nimport login from \"../components/LoginPage.vue\";\nimport register from \"../components/RegisterPage.vue\";\nimport index from \"../components/IndexPage.vue\";\n//2.使用路由\nVue.use(VueRouter);\n//3.创建VueRouter的实例\nconst router = new VueRouter({\n  //tips:不想要 #（锚点）就添加下面代码\n  mode: 'history',\n  //4.配置路由的path和组件\n  routes: [{\n    path: \"./\",\n    name: 'login',\n    component: login\n  }, {\n    path: \"./login\",\n    name: 'login',\n    component: login\n  }, {\n    path: \"/register\",\n    name: 'register',\n    component: register\n  }, {\n    path: \"/index\",\n    name: 'index',\n    component: index\n  }]\n});\nrouter.beforeEach((to, from, next) => {\n  // if (to.path === '/login') {\n  //   next();\n  // } else {\n  //   // let token = window.sessionStorage.getItem(\"CCNtoken\")\n  //   // let token = \"test111\"\n  //   if (token === null || token === '' ) {\n  //     next('/');\n  //   } else  {\n  //     next();\n  //   }\n  // }\n  const token = window.localStorage.getItem('CCNtoken');\n  // 有token\n  if (token) {\n    // 直接放行\n    if (to.path === '/') {\n      next({\n        \"path\": \"/index\"\n      });\n    } else {\n      next();\n    }\n  } else {\n    // 否则是没有\n    // 如果去的是登录页\n    if (to.path === '/login') {\n      // 直接放行\n      next();\n    } else {\n      // 如果去的是其他页,跳转到登录页\n      // Message.error('请登录以后再操作！')\n      // 跳转到登录页\n      return next({\n        \"path\": \"/login\"\n      });\n    }\n  }\n  next();\n});\n// 5.导入路由实例\nexport default router;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}