{"ast":null,"code":"import Vue from \"vue\";\nimport VueRouter from 'vue-router';\nimport login from \"../components/LoginPage.vue\";\nimport register from \"../components/RegisterPage.vue\";\nimport index from \"../components/IndexPage.vue\";\n//2.使用路由\nVue.use(VueRouter);\n//3.创建VueRouter的实例\nconst router = new VueRouter({\n  //tips:不想要 #（锚点）就添加下面代码\n  mode: 'history',\n  //4.配置路由的path和组件\n  routes: [{\n    path: \"/\",\n    name: 'login',\n    component: login\n  }, {\n    path: \"/login\",\n    name: 'login',\n    component: login\n  }, {\n    path: \"/register\",\n    name: 'register',\n    component: register\n  }, {\n    path: \"/index\",\n    name: 'index',\n    component: index\n  }]\n});\nrouter.beforeEach((to, from, next) => {\n  // if (to.path === '/login') {\n  //   next();\n  // } else {\n  //   // let token = window.sessionStorage.getItem(\"CCNtoken\")\n  //   // let token = \"test111\"\n  //   if (token === null || token === '' ) {\n  //     next('/');\n  //   } else  {\n  //     next();\n  //   }\n  // }\n  const token = window.localStorage.getItem('CCNtoken');\n  // 有token\n  if (token) {\n    // 直接放行\n    if (to.path === '/') {\n      next({\n        \"path\": \"/index\"\n      });\n    } else {\n      next();\n    }\n  } else {\n    // 否则是没有\n    // 如果去的是登录页\n    if (to.path === '/login') {\n      // 直接放行\n      next();\n    } else {\n      // 如果去的是其他页,跳转到登录页\n      // Message.error('请登录以后再操作！')\n      // 跳转到登录页\n      return next({\n        \"path\": \"/login\"\n      });\n    }\n  }\n});\n// 5.导入路由实例\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","login","register","index","use","router","mode","routes","path","name","component","beforeEach","to","from","next","token","window","localStorage","getItem"],"sources":["E:/ST/html/vue/gitccn/src/router/index.js"],"sourcesContent":["import Vue from \"vue\";\r\nimport VueRouter from 'vue-router'\r\nimport login from \"../components/LoginPage.vue\";\r\nimport register from \"../components/RegisterPage.vue\";\r\nimport index from \"../components/IndexPage.vue\";\r\n//2.使用路由\r\nVue.use(VueRouter);\r\n//3.创建VueRouter的实例\r\nconst router = new VueRouter({\r\n    //tips:不想要 #（锚点）就添加下面代码\r\n     mode:'history', \r\n    //4.配置路由的path和组件\r\n    routes :[\r\n        {\r\n          path: \"/\",\r\n          name:'login',\r\n          component: login,\r\n        },\r\n        {\r\n          path: \"/login\",\r\n          name:'login',\r\n          component: login,\r\n        },\r\n        {\r\n          path: \"/register\",\r\n          name:'register',\r\n          component: register,\r\n        },\r\n        {\r\n          path: \"/index\",\r\n          name:'index',\r\n          component: index,\r\n        },\r\n      ]\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  // if (to.path === '/login') {\r\n  //   next();\r\n  // } else {\r\n  //   // let token = window.sessionStorage.getItem(\"CCNtoken\")\r\n  //   // let token = \"test111\"\r\n  //   if (token === null || token === '' ) {\r\n  //     next('/');\r\n  //   } else  {\r\n  //     next();\r\n  //   }\r\n  // }\r\n  const token = window.localStorage.getItem('CCNtoken');\r\n  // 有token\r\n  if (token) {\r\n    // 直接放行\r\n    if(to.path === '/'){\r\n      next({ \"path\": \"/index\" })\r\n    }\r\n    else{\r\n      next();\r\n    }\r\n    \r\n  } else {  // 否则是没有\r\n    // 如果去的是登录页\r\n    if (to.path === '/login') {\r\n      // 直接放行\r\n      next();\r\n    } else {\r\n      // 如果去的是其他页,跳转到登录页\r\n      // Message.error('请登录以后再操作！')\r\n      // 跳转到登录页\r\n      return next({ \"path\": \"/login\" })\r\n    }\r\n  }\r\n});\r\n// 5.导入路由实例\r\nexport default router\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,KAAK,MAAM,6BAA6B;AAC/C,OAAOC,QAAQ,MAAM,gCAAgC;AACrD,OAAOC,KAAK,MAAM,6BAA6B;AAC/C;AACAJ,GAAG,CAACK,GAAG,CAACJ,SAAS,CAAC;AAClB;AACA,MAAMK,MAAM,GAAG,IAAIL,SAAS,CAAC;EACzB;EACCM,IAAI,EAAC,SAAS;EACf;EACAC,MAAM,EAAE,CACJ;IACEC,IAAI,EAAE,GAAG;IACTC,IAAI,EAAC,OAAO;IACZC,SAAS,EAAET;EACb,CAAC,EACD;IACEO,IAAI,EAAE,QAAQ;IACdC,IAAI,EAAC,OAAO;IACZC,SAAS,EAAET;EACb,CAAC,EACD;IACEO,IAAI,EAAE,WAAW;IACjBC,IAAI,EAAC,UAAU;IACfC,SAAS,EAAER;EACb,CAAC,EACD;IACEM,IAAI,EAAE,QAAQ;IACdC,IAAI,EAAC,OAAO;IACZC,SAAS,EAAEP;EACb,CAAC;AAET,CAAC,CAAC;AAEFE,MAAM,CAACM,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,MAAMC,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EACrD;EACA,IAAIH,KAAK,EAAE;IACT;IACA,IAAGH,EAAE,CAACJ,IAAI,KAAK,GAAG,EAAC;MACjBM,IAAI,CAAC;QAAE,MAAM,EAAE;MAAS,CAAC,CAAC;IAC5B,CAAC,MACG;MACFA,IAAI,CAAC,CAAC;IACR;EAEF,CAAC,MAAM;IAAG;IACR;IACA,IAAIF,EAAE,CAACJ,IAAI,KAAK,QAAQ,EAAE;MACxB;MACAM,IAAI,CAAC,CAAC;IACR,CAAC,MAAM;MACL;MACA;MACA;MACA,OAAOA,IAAI,CAAC;QAAE,MAAM,EAAE;MAAS,CAAC,CAAC;IACnC;EACF;AACF,CAAC,CAAC;AACF;AACA,eAAeT,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}