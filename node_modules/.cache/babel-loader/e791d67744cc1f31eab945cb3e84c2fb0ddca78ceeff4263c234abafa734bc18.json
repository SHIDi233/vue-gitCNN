{"ast":null,"code":"import Vue from \"vue\";\nimport VueRouter from 'vue-router';\nimport login from \"../components/LoginPage.vue\";\nimport register from \"../components/RegisterPage.vue\";\nimport index from \"../components/IndexPage.vue\";\n// import TableCom from \"../components/TableCom.vue\";\n// import Project from \"../components/ProjectPage.vue\";\nimport projectsBox from \"../components/ProjectsBox.vue\";\nimport projectPage from \"../components/projectPage.vue\";\nimport sp1 from \"../components/FormUserPage.vue\";\nimport sp2 from \"../components/FormBranchPage.vue\";\nimport sp3 from \"../components/FormLivePage.vue\";\nimport introPage from \"../components/IntroPage.vue\";\nimport msgPage from \"../components/MsgPage.vue\";\nimport codePage from \"../components/codePage.vue\";\nimport settingPage from \"../components/SettingPage.vue\";\nimport approvalPage from \"../components/approvalPage.vue\";\nimport FormWarePage from \"../components/FormWarePage.vue\";\n//2.使用路由\nVue.use(VueRouter);\n\n//3.创建VueRouter的实例\n// const router = new VueRouter({\n//     //tips:不想要 #（锚点）就添加下面代码\n//      mode:'history', \n//     //4.配置路由的path和组件\n//     routes :[\n//         {\n//           path: \"/\",\n//           name:'login',\n//           component: login,\n//         },\n//         {\n//           path: \"/login\",\n//           name:'login',\n//           component: login,\n//         },\n//         {\n//           path: \"/register\",\n//           name:'register',\n//           component: register,\n//         },\n//         {\n//           path: \"/home\",\n//           name:'index',\n//           component: index,\n//           children:[{\n//             path: \"projectsBox\",\n//             name:'projectsBox',\n//             component:projectsBox,\n//             children:[\n\n//             ]\n//           },\n//           {\n//             path: \"apply\",\n//             name:'apply',\n//             component:FormWarePage,\n//           },\n//           {\n//             path:\"projectPage/:id\",\n//             name:\"projectPage\",\n//             component:projectPage,\n//             children:[\n//               {\n//                 path: \"code\",\n//                 name:'code',\n//                 component:codePage,\n//               },\n//               {\n//                 path: \"msg\",\n//                 name:'msg',\n//                 component:msgPage,\n//                 children:[\n\n//                 ]\n//               },\n//               {\n//                 path:\"approval/:type/:id\",\n//                 name:'approval',\n//                 component:approvalPage,\n//               },\n//               {\n//                 path: \"setting\",\n//                 name:'settings',\n//                 component:settingPage,\n//               },\n//               {\n//                 path: \"intro\",\n//                 name:'intro',\n//                 component:introPage,\n//               },\n//               {\n//                 path: \"A\",\n//                 name:'sp1',\n//                 component: sp1,\n//               },\n//               {\n//                 path: \"B\",\n//                 name:'sp2',\n//                 component: sp2,\n//               },\n//               {\n//                 path: \"C\",\n//                 name:'sp3',\n//                 component: sp3,\n//               },\n\n//             ]\n//           },\n//         ]\n//         },\n//       ]\n// });\n\n//获取原型对象上的push函数\nconst originalPush = VueRouter.prototype.push;\n//修改原型对象中的push方法\nVueRouter.prototype.push = function push(location) {\n  return originalPush.call(this, location).catch(err => err);\n};\nrouter.beforeEach((to, from, next) => {\n  const token = window.localStorage.getItem('CCNtoken');\n  // 有token\n  if (token) {\n    // 直接放行\n    if (to.path === '/') {\n      next({\n        \"path\": \"/home/projectsBox\"\n      });\n    } else if (to.path === '/home/projectPage') {\n      return next({\n        \"path\": \"/home/projectPage/intro\"\n      });\n    } else {\n      next();\n    }\n  } else {\n    // 否则是没有\n    if (to.path === '/home/projectPage') {\n      return next({\n        \"path\": \"/home/projectPage/intro\"\n      });\n    }\n    // 如果去的是登录页\n    if (to.path === '/login' || to.path === '/register') {\n      // 直接放行\n      next();\n    } else {\n      return next({\n        \"path\": \"/login\"\n      });\n    }\n  }\n  next();\n});\n// 5.导入路由实例\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","login","register","index","projectsBox","projectPage","sp1","sp2","sp3","introPage","msgPage","codePage","settingPage","approvalPage","FormWarePage","use","originalPush","prototype","push","location","call","catch","err","router","beforeEach","to","from","next","token","window","localStorage","getItem","path"],"sources":["E:/ST/html/vue/gitccn/src/router/index.js"],"sourcesContent":["\r\nimport Vue from \"vue\";\r\nimport VueRouter from 'vue-router'\r\nimport login from \"../components/LoginPage.vue\";\r\nimport register from \"../components/RegisterPage.vue\";\r\nimport index from \"../components/IndexPage.vue\";\r\n// import TableCom from \"../components/TableCom.vue\";\r\n// import Project from \"../components/ProjectPage.vue\";\r\nimport projectsBox from \"../components/ProjectsBox.vue\";\r\nimport projectPage from \"../components/projectPage.vue\";\r\n\r\nimport sp1 from \"../components/FormUserPage.vue\";\r\nimport sp2 from \"../components/FormBranchPage.vue\";\r\nimport sp3 from \"../components/FormLivePage.vue\";\r\n\r\nimport introPage from \"../components/IntroPage.vue\";\r\nimport msgPage from \"../components/MsgPage.vue\";\r\nimport codePage from \"../components/codePage.vue\";\r\nimport settingPage from \"../components/SettingPage.vue\";\r\n\r\nimport approvalPage from \"../components/approvalPage.vue\";\r\nimport FormWarePage from \"../components/FormWarePage.vue\";\r\n//2.使用路由\r\nVue.use(VueRouter);\r\n\r\n//3.创建VueRouter的实例\r\n// const router = new VueRouter({\r\n//     //tips:不想要 #（锚点）就添加下面代码\r\n//      mode:'history', \r\n//     //4.配置路由的path和组件\r\n//     routes :[\r\n//         {\r\n//           path: \"/\",\r\n//           name:'login',\r\n//           component: login,\r\n//         },\r\n//         {\r\n//           path: \"/login\",\r\n//           name:'login',\r\n//           component: login,\r\n//         },\r\n//         {\r\n//           path: \"/register\",\r\n//           name:'register',\r\n//           component: register,\r\n//         },\r\n//         {\r\n//           path: \"/home\",\r\n//           name:'index',\r\n//           component: index,\r\n//           children:[{\r\n//             path: \"projectsBox\",\r\n//             name:'projectsBox',\r\n//             component:projectsBox,\r\n//             children:[\r\n              \r\n//             ]\r\n//           },\r\n//           {\r\n//             path: \"apply\",\r\n//             name:'apply',\r\n//             component:FormWarePage,\r\n//           },\r\n//           {\r\n//             path:\"projectPage/:id\",\r\n//             name:\"projectPage\",\r\n//             component:projectPage,\r\n//             children:[\r\n//               {\r\n//                 path: \"code\",\r\n//                 name:'code',\r\n//                 component:codePage,\r\n//               },\r\n//               {\r\n//                 path: \"msg\",\r\n//                 name:'msg',\r\n//                 component:msgPage,\r\n//                 children:[\r\n                  \r\n//                 ]\r\n//               },\r\n//               {\r\n//                 path:\"approval/:type/:id\",\r\n//                 name:'approval',\r\n//                 component:approvalPage,\r\n//               },\r\n//               {\r\n//                 path: \"setting\",\r\n//                 name:'settings',\r\n//                 component:settingPage,\r\n//               },\r\n//               {\r\n//                 path: \"intro\",\r\n//                 name:'intro',\r\n//                 component:introPage,\r\n//               },\r\n//               {\r\n//                 path: \"A\",\r\n//                 name:'sp1',\r\n//                 component: sp1,\r\n//               },\r\n//               {\r\n//                 path: \"B\",\r\n//                 name:'sp2',\r\n//                 component: sp2,\r\n//               },\r\n//               {\r\n//                 path: \"C\",\r\n//                 name:'sp3',\r\n//                 component: sp3,\r\n//               },\r\n              \r\n//             ]\r\n//           },\r\n//         ]\r\n//         },\r\n//       ]\r\n// });\r\n\r\n//获取原型对象上的push函数\r\nconst originalPush = VueRouter.prototype.push\r\n//修改原型对象中的push方法\r\nVueRouter.prototype.push = function push(location) {\r\n  return originalPush.call(this, location).catch(err => err)\r\n}\r\n\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  const token = window.localStorage.getItem('CCNtoken');\r\n  // 有token\r\n  if (token) {\r\n    // 直接放行\r\n    if(to.path === '/'){\r\n      next({\"path\": \"/home/projectsBox\" })\r\n    }\r\n    else if(to.path === '/home/projectPage'){\r\n      return next({ \"path\": \"/home/projectPage/intro\"})\r\n    }\r\n    else{\r\n      next();\r\n    }\r\n    \r\n  } else {  // 否则是没有\r\n      if(to.path === '/home/projectPage'){\r\n    return next({ \"path\": \"/home/projectPage/intro\"})\r\n  }\r\n    // 如果去的是登录页\r\n    if (to.path === '/login' || to.path==='/register') {\r\n      // 直接放行\r\n      next();\r\n    } else {\r\n      return next({ \"path\": \"/login\" })\r\n    }\r\n  }\r\n  next();\r\n});\r\n// 5.导入路由实例\r\nexport default router\r\n"],"mappings":"AACA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,KAAK,MAAM,6BAA6B;AAC/C,OAAOC,QAAQ,MAAM,gCAAgC;AACrD,OAAOC,KAAK,MAAM,6BAA6B;AAC/C;AACA;AACA,OAAOC,WAAW,MAAM,+BAA+B;AACvD,OAAOC,WAAW,MAAM,+BAA+B;AAEvD,OAAOC,GAAG,MAAM,gCAAgC;AAChD,OAAOC,GAAG,MAAM,kCAAkC;AAClD,OAAOC,GAAG,MAAM,gCAAgC;AAEhD,OAAOC,SAAS,MAAM,6BAA6B;AACnD,OAAOC,OAAO,MAAM,2BAA2B;AAC/C,OAAOC,QAAQ,MAAM,4BAA4B;AACjD,OAAOC,WAAW,MAAM,+BAA+B;AAEvD,OAAOC,YAAY,MAAM,gCAAgC;AACzD,OAAOC,YAAY,MAAM,gCAAgC;AACzD;AACAf,GAAG,CAACgB,GAAG,CAACf,SAAS,CAAC;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAMgB,YAAY,GAAGhB,SAAS,CAACiB,SAAS,CAACC,IAAI;AAC7C;AACAlB,SAAS,CAACiB,SAAS,CAACC,IAAI,GAAG,SAASA,IAAIA,CAACC,QAAQ,EAAE;EACjD,OAAOH,YAAY,CAACI,IAAI,CAAC,IAAI,EAAED,QAAQ,CAAC,CAACE,KAAK,CAACC,GAAG,IAAIA,GAAG,CAAC;AAC5D,CAAC;AAGDC,MAAM,CAACC,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EACrD;EACA,IAAIH,KAAK,EAAE;IACT;IACA,IAAGH,EAAE,CAACO,IAAI,KAAK,GAAG,EAAC;MACjBL,IAAI,CAAC;QAAC,MAAM,EAAE;MAAoB,CAAC,CAAC;IACtC,CAAC,MACI,IAAGF,EAAE,CAACO,IAAI,KAAK,mBAAmB,EAAC;MACtC,OAAOL,IAAI,CAAC;QAAE,MAAM,EAAE;MAAyB,CAAC,CAAC;IACnD,CAAC,MACG;MACFA,IAAI,CAAC,CAAC;IACR;EAEF,CAAC,MAAM;IAAG;IACN,IAAGF,EAAE,CAACO,IAAI,KAAK,mBAAmB,EAAC;MACrC,OAAOL,IAAI,CAAC;QAAE,MAAM,EAAE;MAAyB,CAAC,CAAC;IACnD;IACE;IACA,IAAIF,EAAE,CAACO,IAAI,KAAK,QAAQ,IAAIP,EAAE,CAACO,IAAI,KAAG,WAAW,EAAE;MACjD;MACAL,IAAI,CAAC,CAAC;IACR,CAAC,MAAM;MACL,OAAOA,IAAI,CAAC;QAAE,MAAM,EAAE;MAAS,CAAC,CAAC;IACnC;EACF;EACAA,IAAI,CAAC,CAAC;AACR,CAAC,CAAC;AACF;AACA,eAAeJ,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}